version: '3.8'

services:
 mongodb:
  image: mongo:latest
  container_name: mongodb
  ports:
   - "27017:27017"
  volumes:
   - mongo-data:/data/db 

 app:
  build:
   context: .
  container_name: go-app
  ports:
   - "8080:8080"
  environment:
   - MONGO_URI=mongodb://mongodb:27017/asteroidsdb
  depends_on:
   - mongodb
  
volumes:
 mongo-data:
